<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Vue | HonjayChang</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/photo.ico">
    <meta name="description" content="厚积而薄发">
    
    <link rel="preload" href="/assets/css/0.styles.101e93c3.css" as="style"><link rel="preload" href="/assets/js/app.8db34c63.js" as="script"><link rel="preload" href="/assets/js/2.983698d7.js" as="script"><link rel="preload" href="/assets/js/20.38e0a8e2.js" as="script"><link rel="prefetch" href="/assets/js/10.53f50f72.js"><link rel="prefetch" href="/assets/js/11.14ae67e3.js"><link rel="prefetch" href="/assets/js/12.8bd1e098.js"><link rel="prefetch" href="/assets/js/13.81e2b1b5.js"><link rel="prefetch" href="/assets/js/14.89bf0b9b.js"><link rel="prefetch" href="/assets/js/15.c965b4da.js"><link rel="prefetch" href="/assets/js/16.6253e22c.js"><link rel="prefetch" href="/assets/js/17.f2d1d7ed.js"><link rel="prefetch" href="/assets/js/18.d194ed84.js"><link rel="prefetch" href="/assets/js/19.9dfc0424.js"><link rel="prefetch" href="/assets/js/21.29b30efb.js"><link rel="prefetch" href="/assets/js/22.70e339a1.js"><link rel="prefetch" href="/assets/js/23.481c7338.js"><link rel="prefetch" href="/assets/js/24.47652bca.js"><link rel="prefetch" href="/assets/js/25.66e7da71.js"><link rel="prefetch" href="/assets/js/26.162bb288.js"><link rel="prefetch" href="/assets/js/27.5a4ab791.js"><link rel="prefetch" href="/assets/js/28.e7411d81.js"><link rel="prefetch" href="/assets/js/29.9144167b.js"><link rel="prefetch" href="/assets/js/3.363d4551.js"><link rel="prefetch" href="/assets/js/30.1265b18a.js"><link rel="prefetch" href="/assets/js/31.c8454f4e.js"><link rel="prefetch" href="/assets/js/32.5e3e87b4.js"><link rel="prefetch" href="/assets/js/33.8f3137a0.js"><link rel="prefetch" href="/assets/js/34.3b003f35.js"><link rel="prefetch" href="/assets/js/35.840eb4e9.js"><link rel="prefetch" href="/assets/js/36.df15f5f0.js"><link rel="prefetch" href="/assets/js/37.aaea4be9.js"><link rel="prefetch" href="/assets/js/38.352ad4cb.js"><link rel="prefetch" href="/assets/js/39.e72d78d1.js"><link rel="prefetch" href="/assets/js/4.d38cbe0d.js"><link rel="prefetch" href="/assets/js/40.dff4d77e.js"><link rel="prefetch" href="/assets/js/5.b570c556.js"><link rel="prefetch" href="/assets/js/6.c9f44ce5.js"><link rel="prefetch" href="/assets/js/7.5da1919b.js"><link rel="prefetch" href="/assets/js/8.c43efb22.js"><link rel="prefetch" href="/assets/js/9.d8640715.js">
    <link rel="stylesheet" href="/assets/css/0.styles.101e93c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/photo.jpg" alt="HonjayChang" class="logo"> <span class="site-name can-hide">HonjayChang</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FE/" class="nav-link router-link-active">
  FE
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  INTE
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  DEV
</a></div><div class="nav-item"><a href="/DS/" class="nav-link">
  DS
</a></div><div class="nav-item"><a href="https://honjaychang.github.io/VuePress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Link
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FE/" class="nav-link router-link-active">
  FE
</a></div><div class="nav-item"><a href="/interview/" class="nav-link">
  INTE
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  DEV
</a></div><div class="nav-item"><a href="/DS/" class="nav-link">
  DS
</a></div><div class="nav-item"><a href="https://honjaychang.github.io/VuePress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Link
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE/Js.html" class="sidebar-link">JS 基础</a></li><li><a href="/FE/JsAdvanced.html" class="sidebar-link">JS 进阶</a></li><li><a href="/FE/Reg.html" class="sidebar-link">正则</a></li><li><a href="/FE/Module.html" class="sidebar-link">模块化</a></li><li><a href="/FE/JS数据结构.html" class="sidebar-link">JS 数据结构</a></li><li><a href="/FE/ALGO.html" class="sidebar-link">ALGO</a></li><li><a href="/FE/scene.html" class="sidebar-link">场景题</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE/Vue.html" aria-current="page" class="active sidebar-link">Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/FE/Vue.html#mvvm-mvc" class="sidebar-link">MVVM MVC</a></li><li class="sidebar-sub-header"><a href="/FE/Vue.html#vue-生命周期" class="sidebar-link">Vue 生命周期</a></li><li class="sidebar-sub-header"><a href="/FE/Vue.html#响应式原理" class="sidebar-link">响应式原理</a></li><li class="sidebar-sub-header"><a href="/FE/Vue.html#发布订阅模式" class="sidebar-link">发布订阅模式</a></li><li class="sidebar-sub-header"><a href="/FE/Vue.html#虚拟dom" class="sidebar-link">虚拟DOM</a></li><li class="sidebar-sub-header"><a href="/FE/Vue.html#dom-diff" class="sidebar-link">DOM Diff</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/FE/React.html" class="sidebar-link">React</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="vue"><a href="#vue" class="header-anchor">#</a> Vue</h3> <p>渐进式框架</p> <p>视图层渲染 =&gt; 组件机制 =&gt; 路由机制 =&gt; 状态管理 =&gt; 构建工具</p> <h2 id="mvvm-mvc"><a href="#mvvm-mvc" class="header-anchor">#</a> MVVM MVC</h2> <ul><li><p><code>MVC =&gt; MVC Model View Controller</code></p> <ul><li><code>controller</code>负责将<code>Model</code>的数据用<code>View</code>显示出来</li> <li>在<code>Controller</code>里面把<code>Model</code>的数据赋值给<code>View</code></li></ul></li> <li><p><code>MVVM =&gt; MVMM Model View ViewModel</code></p> <ul><li><code>ViewModel</code>负责把<code>Model</code>的数据同步到<code>View</code>显示出来，还负责把<code>View</code>的界面修改同步回<code>Model</code>更新数据</li></ul></li></ul> <p>区别：</p> <ul><li><code>MVVM</code>实现了<code>view</code>与<code>model</code>的自动同步，也就是<code>model</code>属性改变的时候，我们不需要再自己手动操作<code>dom</code>元素去改变<code>view</code>的显示，而是改变属性后该属性对应的<code>view</code>层会自动改变。</li></ul> <p><code>Ref</code></p> <ul><li><a href="http://www.ruanyifeng.com/blog/2015/02/mvcmvp_mvvm.html" target="_blank" rel="noopener noreferrer">MVC，MVP 和 MVVM 的图示<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="vue-生命周期"><a href="#vue-生命周期" class="header-anchor">#</a> Vue 生命周期</h2> <p><a href="https://programmer.help/blogs/vue-personal-project-summary-knowledge-points-summary.html" target="_blank" rel="noopener noreferrer">图源<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p><img src="https://cdn.jsdelivr.net/gh/honjaychang/icopicture/blog/Vue%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.jpg" alt="Vue生命周期"></p> <p>Vue生命周期：Vue 实例从创建到销毁的过程。也就是从开始创建、初始化数据、编译模板、挂载DOM-渲染、更新-渲染、卸载等一系列的过程。</p> <ul><li><code>beforeCreate</code>：
<ul><li>初始化Vue实例的所有生命周期函数</li> <li>此时<code>data computed watch methods</code>上的方法和数据均不能访问</li></ul></li> <li><code>created</code>：
<ul><li>初始化当前Vue实例的<code>data</code>以及<code>methods</code> 但是DOM还没有初始化 可以通过<code>vm.$nextTick</code>来访问DOM</li> <li>可以发起一些异步请求，但请求不宜过多，避免白屏时间太长</li></ul></li> <li><code>beforeMount</code>：
<ul><li>判断<code>el</code>是否挂载 判断是否有<code>template</code></li> <li>模板编译如果没有<code>template</code>则把<code>el</code>区域当做模板 存放在内存中 浏览器还是一片空白</li></ul></li> <li><code>mounted</code>：
<ul><li>正在把页面中模板替换为内存中真实数据  模版挂载过程</li> <li>这个时候可以操作DOM了使用<code>$refs</code>属性对Dom进行操作</li></ul></li> <li><code>beforeUpdate</code>：
<ul><li>页面显示的数据是旧的，此时data里面的数据是新的</li></ul></li> <li><code>updated</code>：
<ul><li>数据更新后，完成虚拟DOM的重新渲染和打补丁</li></ul></li> <li><code>beforeDestory</code>：
<ul><li>在实例销毁之前，此时实例仍然可以使用</li></ul></li> <li><code>destoryed</code>：
<ul><li>实例销毁后</li></ul></li></ul> <h2 id="响应式原理"><a href="#响应式原理" class="header-anchor">#</a> 响应式原理</h2> <p><s>别搁这双向绑定 双向绑定面试回答都口糊了</s></p> <ul><li>vue的数据双向绑定：采用数据劫持结合发布者-订阅者模式的方式，通过<code>Object.defineProperty()</code>来劫持各个属性的<code>setter</code>，<code>getter</code>，在数据变动时发布消息给订阅者，触发相应的监听回调</li> <li></li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>txt<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>show<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> text<span class="token punctuation">;</span>
    Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token string">&quot;txt&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> text<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            text <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
            document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;show&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> newValue<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;keyup&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        obj<span class="token punctuation">.</span>txt <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>txt<span class="token punctuation">,</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li><code>Object.defineProperty()</code></li> <li><code>proxy</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Object.defineProperty()</span>
<span class="token comment">// Object -&gt; defineProperty() 定义属性</span>
<span class="token comment">// Object.defineProperties(obj, {</span>
<span class="token comment">//   a: {},</span>
<span class="token comment">//   b: {},</span>
<span class="token comment">// });</span>

<span class="token comment">// Proxy ES6 构造函数</span>

<span class="token comment">// function Proxy() {}</span>
<span class="token comment">// var proxy = new Proxy();</span>

<span class="token comment">// defineProperty 数据劫持 -&gt; 给对象进行拓展 -&gt; 属性进行设置</span>

<span class="token comment">// var obj = {};</span>
<span class="token comment">// defineProperty(obj, &quot;属性名&quot;){}</span>

<span class="token keyword">var</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>
  a<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  b<span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// target 目标对象 你要进行处理的对象</span>
<span class="token comment">// handler 容器 无数可以处理对象属性的方法</span>
<span class="token comment">// let obj = new Proxy(target, handler);</span>
<span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  <span class="token function">get</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;property val: &quot;</span> <span class="token operator">+</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">set</span><span class="token punctuation">(</span>target<span class="token punctuation">,</span> prop<span class="token punctuation">,</span> value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span> <span class="token comment">// 只有设置了value才能更改 输出</span>
    <span class="token keyword">return</span> target<span class="token punctuation">[</span>prop<span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// property val: 1</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
proxy<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>proxy<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3</span>
<span class="token comment">// 同理 proxy 对数组 以及 构造函数都有效 而 Object.property()只对 对象生效</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><ul><li>对数据进行劫持监听，需要设置一个监听器<code>Observer</code>，用来监听所有属性。如果属性发生变化了，就需要告诉订阅者<code>Watcher</code>看是否需要更新。因为订阅者是有很多个，所以我们需要有一个消息订阅器<code>Dep</code>来专门收集这些订阅者，然后在监听器<code>Observer</code>和订阅者<code>Watcher</code>之间进行统一管理的。接着，我们还需要有一个指令解析器<code>Compile</code>，对每个节点元素进行扫描和解析，将相关指令对应初始化成一个订阅者<code>Watcher</code>，并替换模板数据或者绑定相应的函数，此时当订阅者<code>Watcher</code>接收到相应属性的变化，就会执行对应的更新函数，从而更新视图。</li> <li>监听器<code>Observer</code> 用来劫持并监听所有属性，如果有变动的，就通知订阅者。</li> <li>订阅者<code>Watcher</code> 可以收到属性的变化通知并执行相应的函数，从而更新视图。</li> <li>解析器<code>Compile</code> 对每个元素节点的指令进行扫描和解析，根据指令模板 替换数据，以及绑定相应的更新函数</li></ul> <blockquote><p>深入浅出 <code>Vue.js</code></p></blockquote> <p>变化侦测就是侦测数据的变化。当数据发生变化时,要能侦测到并发出通知。</p> <p><code>Observer</code>：</p> <p>它的作用是把一个 <code>object</code> 中的所有数据（包括子数据）都转换成响应式的，也就是它会侦测 <code>object</code>  中所有数据的变化。</p> <ul><li><code>object</code> 可以通过 <code>object.defineProperty</code> 将属性转换成 <code>getter setter</code>的形式来追踪变化。读取数据时会触发 <code>getter</code> ，修改数据时会触发 <code>setter</code>。</li> <li>触发<code>get</code>方法，去收集有哪些依赖使用了数据。通过<code>Dep</code>来收集依赖，也就是收集<code>Watcher</code>。</li> <li>当 <code>setter</code> 被触发时,去通知 <code>getter</code> 中收集的依赖数据发生了变化。</li></ul> <p><code>Dep</code></p> <ul><li>创建<code>Dep</code>，用来存储依赖 实现收集依赖、删除依赖和向依赖发送消息等</li></ul> <p><code>Watcher</code>：依赖</p> <ul><li>只有 <code>Watcher</code> 触发的 <code>getter</code> 才会收集依赖,哪个 <code>Watcher</code> 触发了<code>getter</code>，就把哪个 <code>watcher</code> 收集到 <code>Dep</code> 中。当数据发生变化时，会循环依赖列表，把所有的 <code>Watcher</code> 都通知一遍。</li></ul> <p><code>Watcher</code> 原理：是先把自己设置到全局唯一的指定位置（例如<code>window.target</code>），然后读取数据。因为读取了数据，所以会触发这个数据的 <code>getter</code> 。接着，在 <code>getter</code> 中就会从全局唯一的那个位置读取当前正在读取数据的 <code>Watcher</code> ，并把这个 <code>Watcher</code> 收集到 <code>Dep</code> 中去。通过这样的方式，<code>Watcher</code> 可以主动去订阅任意一个数据的变化。</p> <p><img src="https://cdn.jsdelivr.net/gh/honjaychang/icoPicture/blog/observer.png" alt="observer"></p> <ul><li><code>Data</code> 通过 <code>Observer</code> 转换成了 <code>getter/setter</code> 的形式来追踪变化。</li> <li>当外界通过 <code>Watcher</code> 读取数据时，会触发 <code>getter</code> 从而将 <code>Watcher</code> 添加到依赖中。</li> <li>当数据发生了变化时，会触发 <code>setter</code>，从而向 <code>Dep</code> 中的依赖<code>(Watcher)</code> 发送通知。</li> <li><code>Watcher</code> 接收到通知后，会向外界发送通知，变化通知到外界后可能会触发视图更新，也有可能触发用户的某个回调函数等。</li></ul> <p><code>Ref</code> :</p> <ul><li><a href="https://juejin.cn/post/6844903479044112391" target="_blank" rel="noopener noreferrer">vue 的双向绑定原理及实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank" rel="noopener noreferrer">深入响应式原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.csdn.net/wuxy720/article/details/80151610" target="_blank" rel="noopener noreferrer">Vue双向数据绑定原理解析及代码实现<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://segmentfault.com/a/1190000006599500" target="_blank" rel="noopener noreferrer">剖析Vue原理&amp;实现双向绑定MVVM<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6844903858850758670" target="_blank" rel="noopener noreferrer">Vue响应式原理-理解Observer、Dep、Watcher<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://juejin.cn/post/6950826293923414047" target="_blank" rel="noopener noreferrer">Vue 源码解读（3）—— 响应式原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="发布订阅模式"><a href="#发布订阅模式" class="header-anchor">#</a> 发布订阅模式</h2> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> pubSub <span class="token operator">=</span> <span class="token punctuation">{</span>
  subscribers<span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">unSubscribe</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">delete</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">publish</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> listeners <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>subscribers<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
    listeners<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 通知所有订阅者</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 为简化代码，省去了一些错误边界的处理，调试：*/</span>
pubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'first event'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
pubSub<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'second event'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

pubSub<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">'event'</span><span class="token punctuation">)</span> <span class="token comment">// first event second event</span>


<span class="token comment">// 发布订阅模式就是通过在事件调度中心（subscribers）添加订阅者的事件（subscribe），等到发布事件（publish）时执行相应的事件就可以</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><blockquote><p>实现一个EventEmitter</p></blockquote> <ul><li><p>创建一个 <code>EventEmitter</code>，承担全局事件总线功能 （事件中心）</p></li> <li><p>实现 <code>on</code> 事件监听方法</p></li> <li><p>实现 <code>emit</code> 事件订阅方法</p></li> <li><p>发布者 事件中心 订阅者</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">EventEmitter</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// handlers是一个map，用于存储事件与回调之间的对应关系</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// on方法用于安装事件监听器，它接受目标事件名和回调函数作为参数</span>
  <span class="token function">on</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 先检查一下目标事件名有没有对应的监听函数队列</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果没有，那么首先初始化一个监听函数队列</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 把回调函数推入目标事件的监听函数队列里去</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>cb<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token comment">// emit方法用于触发目标事件，它接受事件名和监听函数入参作为参数</span>
  <span class="token function">emit</span><span class="token punctuation">(</span><span class="token parameter">eventName<span class="token punctuation">,</span> <span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 检查目标事件是否有监听函数队列</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 如果有，则逐个调用队列里的回调函数</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>handlers<span class="token punctuation">[</span>eventName<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">callback</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="虚拟dom"><a href="#虚拟dom" class="header-anchor">#</a> 虚拟DOM</h2> <ul><li><code>Angular</code> 脏数据检测</li> <li><code>React</code> 虚拟<code>DOM</code></li> <li><code>Vue</code> 细粒度的绑定
<ul><li>中等粒度 =&gt; 组件级别的<code>watcher</code> + 虚拟<code>DOM</code></li></ul></li></ul> <p>Vue中的虚拟DOM</p> <ol><li>使用模版来描述状态与DOM之间的映射关系。</li> <li>通过编译将模版转换成渲染函数<code>render</code></li> <li>执行渲染函数可以得到一个虚拟节点树</li> <li>使用虚拟节点树可以渲染页面</li></ol> <blockquote><p>模版 (编译)=&gt; 渲染函数 (执行)=&gt; <code>vnode</code> <code>(patch)</code>=&gt; 视图</p></blockquote> <ul><li>提供与真实 <code>DOM</code> 节点所对应的虚拟节点 <code>vnode</code></li> <li>将虚拟节点 <code>vnode</code> 和旧虚拟节点 <code>oldVnode</code> 进行对比，然后更新视图</li></ul> <p>AST 抽象语法树</p> <ul><li>通过<code>JS</code> 的 <code>Object</code> 对象模拟 <code>DOM</code> 中的节点，然后再通过特定的 <code>render</code> 方法将其渲染成真实的 <code>DOM</code> 节点</li> <li><code>virtual dom</code> 是通过 <code>JS</code> 层面的计算，返回一个 <code>patch</code> 对象，即补丁对象，在通过特定的操作解析 <code>patch</code> 对象，完成页面的重新渲染。避免了直接去操作<code>DOM</code>渲染页面的过程</li></ul> <h2 id="dom-diff"><a href="#dom-diff" class="header-anchor">#</a> DOM Diff</h2> <ul><li><p>是否为同一节点</p> <ul><li>否：删除该节点重新创建节点进行替换</li> <li>是：递归地进行同级<code>vnode</code>的<code>diff</code></li></ul></li> <li><p>只对同层的子节点进行比较，不进行跨级节点比较</p></li> <li><p><code>Tree diff</code> 两颗树只会对同一层级的节点进行比较，不同层级的就算说相同节点的移动也会销毁重新创建</p></li> <li><p><code>component diff</code> 如果不是同一类型下的组件，则将该组件判断为 <code>dirty component</code>，从而替换整个组件下的所有子节点</p></li> <li><p><code>element diff</code> 处于同一层级的节点，拥有以下三种操作插入、移动、删除，同时如果某些节点只是在同级发生移位。允许开发者对同一层级的同组子节点，添加唯一<code>key</code>进行区分，提高性能优化。</p></li></ul> <h4 id="patch"><a href="#patch" class="header-anchor">#</a> <code>patch</code></h4> <ul><li>创建新增的节点</li> <li>删除已经废弃的节点</li> <li>修改需要更新的节点</li></ul> <h4 id="模版编译"><a href="#模版编译" class="header-anchor">#</a> 模版编译</h4> <ul><li>将模版解析为 <code>AST</code>    解析器</li> <li>遍历 <code>AST</code> 标记静态节点    优化器</li> <li>使用 <code>AST</code> 生成渲染函数    代码生成器</li></ul> <h4 id="vue的key的作用"><a href="#vue的key的作用" class="header-anchor">#</a> Vue的Key的作用</h4> <ul><li><p>key主要用在虚拟Dom算法中，每个虚拟节点VNode有一个唯一标识Key，通过对比新旧节点的key来判断节点是否改变，用key就可以大大提高渲染效率，这个key类似于缓存中的etag。</p></li> <li><p>key的作用主要是为了高效的更新虚拟DOM</p></li> <li><p>vue中在使用相同标签名元素的过渡切换时，也会使用到key属性，其目的也是为了让vue可以区分它们</p></li></ul> <h5 id="vue-router"><a href="#vue-router" class="header-anchor">#</a> Vue-router</h5> <p>vue 是渐进式前端开发框架，为了实现 SPA ，需要引入前端路由系统<code>(vue-router)</code>。前端路由的核心是：改变视图的同时不会向后端发出请求。</p> <ul><li><code>hash</code>模式
<ul><li><code>hash</code> 虽然出现在 <code>URL</code> 中，但不会被包含在 <code>http</code> 请求中，对后端完全没有影响，因此改变 <code>hash</code> 不会重新加载页面。</li> <li>利用<code>onhashchange</code>事件实现前端路由，可以在 <code>window</code> 对象上监听这个事件</li></ul></li> <li><code>history</code>模式
<ul><li>利用了 <code>html5 history interface</code> 中新增的 <code>pushState()</code> 和 <code>replaceState()</code>方法。这两个方法应用于浏览器记录栈，在当前已有的 <code>back、forward、go</code> 基础之上，它们提供了对历史记录修改的功能。只是当它们执行修改时，虽然改变了当前的 URL ，但浏览器不会立即向后端发送请求。</li> <li><code>history api (pushState、replaceState、go、back、forward)</code> 则给了前端完全的自由，通过在<code>window</code>对象上监听<code>popState()</code>事件</li> <li><code>history</code> 在刷新页面时，如果服务器中没有相应的响应或资源，就会出现404。</li></ul></li></ul> <h5 id="vue-use-plugin"><a href="#vue-use-plugin" class="header-anchor">#</a> <code>Vue.use(plugin)</code></h5> <ul><li>传入一个对象，对象包含<code>install</code>方法
<ul><li><code>plugin.install.apply(plugin, args)</code></li></ul></li> <li>传入的<code>plugin</code>是一个函数
<ul><li><code>plugin.apply(null, args)</code></li></ul></li></ul> <h5 id="v-for-和v-if为什么不能联用"><a href="#v-for-和v-if为什么不能联用" class="header-anchor">#</a> <code>v-for</code> 和<code>v-if</code>为什么不能联用？</h5> <ul><li><code>v-for</code> 会比 <code>v-if</code>优先执行( 可以自己编写代码测试 也可以从源码中发现)，容易造成性能浪费</li> <li>但可以嵌套使用。外层<code>v-if</code> 判断 内部<code>v-for</code>来避免性能浪费</li></ul> <h5 id="路由懒加载"><a href="#路由懒加载" class="header-anchor">#</a> 路由懒加载</h5> <ul><li>提高页面首次渲染时间</li> <li>普通加载 会在首次加载所有资源</li> <li>懒加载会在用户点击跳转的时候再去加载</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>component<span class="token operator">:</span>About

<span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> 
  <span class="token operator">=&gt;</span> <span class="token keyword">import</span> <span class="token punctuation">(</span><span class="token comment">/* webpackChunkName: 'about' */</span> <span class="token string">'../views/About.vue'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>vue的SPA单页面应用程序的性能优化可以来一个整合，讲解路由懒加载组件懒加载图片懒加载，首屏优化预加载，组件缓存和数据缓存这些整合在一起。</p> <h5 id="vue2中数组变化的限制-解决方法"><a href="#vue2中数组变化的限制-解决方法" class="header-anchor">#</a> Vue2中数组变化的限制&amp;解决方法</h5> <p>下面两个现象在Vue2中检测不到变化，但在Vue3得以解决</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token punctuation">{</span>
		colors <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">,</span> <span class="token string">'pink'</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>根据索引修改数组的值</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>vm<span class="token punctuation">.</span>colors<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'yellow'</span> <span class="token comment">// 不会生效</span>

vm<span class="token punctuation">.</span><span class="token function">$set</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>colors<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span>
vm<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">)</span> <span class="token comment">// vue 会劫持splice方法 从而进行更新</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>修改数组的长度</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>vm<span class="token punctuation">.</span>colors<span class="token punctuation">.</span>length<span class="token operator">--</span>

vm<span class="token punctuation">.</span>$<span class="token keyword">delete</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>colors<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
vm<span class="token punctuation">.</span>colors<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="命名路由"><a href="#命名路由" class="header-anchor">#</a> 命名路由</h5> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: 'Home' }&quot;</span><span class="token operator">&gt;</span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span> 
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">&quot;{ name: 'About'}&quot;</span><span class="token operator">&gt;</span>About<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h5 id="导航守卫"><a href="#导航守卫" class="header-anchor">#</a> 导航守卫</h5> <ul><li>全局守卫</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 全局前置守卫 每次跳转都会执行</span>
router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 全局解析守卫 在导航被确认之前，同时在所有组件内守卫和异步路由组件被解析之后，解析守卫就被调用。</span>
router<span class="token punctuation">.</span><span class="token function">beforeResolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 全局后置守卫</span>
router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>路由独享守卫</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 该守卫只在其他路由跳转至配置有beforeEnter路由表信息时才生效</span>
<span class="token function-variable function">beforEnter</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>组件内守卫</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 进入该路由时执行</span>
<span class="token function">beforeRouteEnter</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">next</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

<span class="token comment">// 该路由中参数改变时执行</span>
<span class="token function">beforeRouteUpdate</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
  
<span class="token comment">// 离开该路由时执行</span>
<span class="token function">beforeRouteLeave</span><span class="token punctuation">(</span><span class="token parameter">to<span class="token punctuation">,</span> <span class="token keyword">from</span><span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>页面跳转：<code>beforeRouteLeave -&gt; beforeEach -&gt; beforeEnter -&gt; beforeRouteEnter -&gt; beforeResolve -&gt; afterEach</code></p> <h5 id="vue组件中data为什么必须是一个函数"><a href="#vue组件中data为什么必须是一个函数" class="header-anchor">#</a> Vue组件中data为什么必须是一个函数</h5> <ul><li>保证每个组件的数据都是独立的。因为组件可能被用来创建多个实例，如果 data 只是一个纯粹的对象，则所有的实例将共享引用同一个数据对象！通过提供 data 函数，每次创建一个新实例后，我们能够调用 data 函数，从而返回初始数据的一个全新副本数据对象。（对象是引用类型嘛，指向同一块内存地址，组件操作共享同一个值不就乱套了嘛，所以我们就可以通过<code>return data</code>保证每个组件的数据不会被共享</li></ul> <h5 id="组件通信"><a href="#组件通信" class="header-anchor">#</a> 组件通信</h5> <ul><li><p>父子组件通信</p> <ul><li>父组件 -&gt; 子组件：<code>prop</code></li> <li>子组件 -&gt; 父组件：<code>$on/$emit</code></li> <li>获取组件实例：使用<code>$parent/$children</code>，<code>$refs.xxx</code>，获取到实例后直接获取属性数据或调用组件方法</li></ul></li> <li><p>兄弟组件通信</p> <ul><li>Event Bus：每一个Vue实例都是一个Event Bus，都支持<code>$on/$emit</code>，可以为兄弟组件的实例之间new一个Vue实例，作为Event Bus进行通信</li> <li>Vuex：将状态和方法提取到Vuex，完成共享</li></ul></li> <li><p>跨级组件通信</p> <ul><li>使用<code>provide/inject</code></li> <li>Event Bus：同兄弟组件Event Bus通信</li> <li>Vuex：将状态和方法提取到Vuex，完成共享</li></ul></li></ul> <h5 id="vue事件绑定原理"><a href="#vue事件绑定原理" class="header-anchor">#</a> Vue事件绑定原理</h5> <p><code>Vue</code>中通过<code>v-on</code>或其语法糖<code>@</code>指令来给元素绑定事件并且提供了事件修饰符，基本流程是进行模板编译生成<code>AST</code>，生成<code>render</code>函数后并执行得到<code>VNode</code>，<code>VNode</code>生成真实<code>DOM</code>节点或者组件时候使用<code>addEventListener</code>方法进行事件绑定。</p> <p><code>$event</code></p> <h5 id="watch-computed-区别"><a href="#watch-computed-区别" class="header-anchor">#</a> <code>watch computed</code>  区别</h5> <ul><li><code>watch</code> 一个数据影响多个数据 (我自己变化影响别人)  不支持缓存 支持异步</li> <li><code>computed</code> 一个数据受多个数据的影响 (别人变化影响我自己)  支持缓存 不支持异步</li> <li>当依赖的值变化时
<ul><li><code>watch</code> 可以做一些复杂的操作</li> <li><code>computed</code> 不会立即重新计算生成新的值，而是先标记为脏数据，当下次被获取时候，才会进行重新计算并返回</li></ul></li></ul> <h5 id="vue-nexttick"><a href="#vue-nexttick" class="header-anchor">#</a> <code>Vue.nextTick()</code></h5> <ul><li>在下次 DOM 更新循环结束之后执行延迟回调。在修改数据之后立即使用这个方法，获取更新后的 DOM。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//改变数据</span>
vm<span class="token punctuation">.</span>message <span class="token operator">=</span> <span class="token string">'changed'</span>

<span class="token comment">//想要立即使用更新后的DOM。这样不行，因为设置message后DOM还没有更新</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span> <span class="token comment">// 并不会得到'changed'</span>

<span class="token comment">//这样可以，nextTick里面的代码会在DOM更新后执行</span>
Vue<span class="token punctuation">.</span><span class="token function">nextTick</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vm<span class="token punctuation">.</span>$el<span class="token punctuation">.</span>textContent<span class="token punctuation">)</span> <span class="token comment">//可以得到'changed'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li></li></ul> <h4 id="基础"><a href="#基础" class="header-anchor">#</a> 基础</h4> <ul><li><code>message:'&lt;p&gt;a&lt;/p&gt;'</code></li></ul> <h5 id="mustache"><a href="#mustache" class="header-anchor">#</a> <code>Mustache {{}}</code></h5> <ul><li><code>&lt;p&gt;&lt;/p&gt; // &lt;p&gt;a&lt;/p&gt;</code></li></ul> <h5 id="v-band"><a href="#v-band" class="header-anchor">#</a> <code>v-band =&gt; :</code></h5> <ul><li>动态绑定(可以绑定所有的原生属性)</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>{active:isActive,类名2:boolean}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
这么长一串也可以用计算属性或者函数来传递
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">:class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>getClass()<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>    函数括号不能少
getClass(){return {active:this.isActive,line:this.isLine}}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h5 id="v-on"><a href="#v-on" class="header-anchor">#</a> <code>v-on =&gt; @</code></h5> <ul><li><code>@click.stop=&quot;xxx&quot; 调用了event.stopPropagation()</code></li> <li><code>@click.prevent=&quot;xxx&quot;&gt; 调用了event.preventDefault()</code></li> <li><code>@keyup.enter=&quot;keyUp&quot;</code></li></ul> <h5 id="v-show-v-if"><a href="#v-show-v-if" class="header-anchor">#</a> <code>v-show v-if</code></h5> <ul><li><code>v-show</code> 默认为<code>false</code> 会用<code>display:none</code>动态隐藏和显示</li> <li><code>v-if</code> 会删除 不存在dom中 动态删除和创建</li></ul> <h5 id="v-for"><a href="#v-for" class="header-anchor">#</a> <code>v-for</code></h5> <ul><li><p>遍历数组 <code>(value, index)</code></p></li> <li><p>遍历对象 <code>(value, key, index)</code></p></li> <li><p>响应式的方法: <code>push()、pop() shift() unshift() splice() sort() reverse()</code></p> <ul><li>通过索引值来修改数组中的元素 不会响应式的渲染</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>letters<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'bbb'</span> <span class="token comment">// 不行</span>

<span class="token keyword">this</span><span class="token punctuation">.</span>letters<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'bbb'</span><span class="token punctuation">)</span>
Vue<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>letters<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token string">'bbb'</span><span class="token punctuation">)</span><span class="token comment">//要修改的对象 索引值 修改后的值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h5 id="v-model"><a href="#v-model" class="header-anchor">#</a> <code>v-model</code></h5> <ul><li>数据双向绑定</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>p45v<span class="token operator">-</span>model原理  v<span class="token operator">-</span>model和表单的联用

<span class="token operator">&lt;</span>input type<span class="token operator">=</span> <span class="token string">'text'</span> v<span class="token operator">-</span>model<span class="token operator">=</span><span class="token string">&quot;message&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>input type<span class="token operator">=</span> <span class="token string">'text'</span> <span class="token operator">:</span>value<span class="token operator">=</span><span class="token string">&quot;message&quot;</span> @input<span class="token operator">=</span><span class="token string">&quot;message = $event.target.value&quot;</span><span class="token operator">&gt;</span>
checkbox	单选框对应的是boolean	复选框对应的是arr

修饰符
<span class="token operator">&lt;</span>input type<span class="token operator">=</span> <span class="token string">'text'</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>lazy<span class="token operator">=</span><span class="token string">&quot;message&quot;</span><span class="token operator">&gt;</span>	数据失去焦点或者回车时才会更新数据
<span class="token operator">&lt;</span>input type<span class="token operator">=</span> <span class="token string">'number'</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>number<span class="token operator">=</span><span class="token string">&quot;message&quot;</span><span class="token operator">&gt;</span>	使得文本输入框的输入类型由字符串转化为num
<span class="token operator">&lt;</span>input type<span class="token operator">=</span> <span class="token string">'text'</span> v<span class="token operator">-</span>model<span class="token punctuation">.</span>trim<span class="token operator">=</span><span class="token string">&quot;message&quot;</span><span class="token operator">&gt;</span>	去除首尾空格
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h5 id="v-once"><a href="#v-once" class="header-anchor">#</a> <code>v-once</code></h5> <ul><li>绑定的数据将无法被改变</li> <li><code>&lt;p v-once&gt;&lt;/p&gt;</code></li></ul> <h5 id="v-html"><a href="#v-html" class="header-anchor">#</a> <code>v-html</code></h5> <ul><li>将html代码解析</li> <li><code>&lt;p v-html=&quot;message&quot;&gt;&lt;/p&gt; // a</code></li></ul> <h5 id="v-text"><a href="#v-text" class="header-anchor">#</a> <code>v-text</code></h5> <ul><li>不推荐</li> <li><code>&lt;p v-text=&quot;message&quot;&gt;&lt;/p&gt; // &lt;p&gt;a&lt;/p&gt;</code></li></ul> <h5 id="v-pre"><a href="#v-pre" class="header-anchor">#</a> <code>v-pre</code></h5> <ul><li>不做解析</li> <li><code>&lt;p v-pre&gt;&lt;/p&gt;</code></li></ul> <h5 id="v-cloak"><a href="#v-cloak" class="header-anchor">#</a> <code>v-cloak</code></h5> <ul><li><p>斗篷 避免js文件加载异常 导致用户体验过差</p></li> <li><div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-cloak</span><span class="token punctuation">&gt;</span></span>{{message}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">[v-cloak]</span><span class="token punctuation">{</span>
      <span class="token property">display</span><span class="token punctuation">:</span>none<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul> <h5 id="v-slot"><a href="#v-slot" class="header-anchor">#</a> <code>v-slot</code></h5> <ul><li><code>v-slot =&gt; #</code></li> <li><code>v-slot</code> 只能添加在 <code>&lt;template&gt;</code> 上</li> <li>默认插槽</li> <li>具名插槽</li> <li>作用域插槽</li> <li><code>Ref</code>：<a href="https://juejin.cn/post/6844904178901319687" target="_blank" rel="noopener noreferrer">一次性讲明白vue插槽slot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h5 id="this-refs"><a href="#this-refs" class="header-anchor">#</a> <code>this.$refs</code></h5> <h5 id="computed"><a href="#computed" class="header-anchor">#</a> <code>computed</code></h5> <ul><li>计算属性</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><code>setter getter</code> <ul><li>计算属性并不希望被更改  所以一般没有 <code>set</code> 方法，所以就是一个只读属性</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//完整实现	</span>
computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    fullName<span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token function-variable function">set</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">newValue</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> names <span class="token operator">=</span> newValue<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>lastName <span class="token operator">=</span> names<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">get</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName<span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h5 id="filters"><a href="#filters" class="header-anchor">#</a> <code>filters</code></h5> <ul><li>过滤器  把前面需要过滤的东西作为参数 传递到后面的函数里</li></ul> <div class="language-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>{{num|add|multiply|divide}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span> // 3
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token function">data</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      num<span class="token operator">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  filters<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">add</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">(</span>value <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">multiply</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> value <span class="token operator">*</span> <span class="token number">6</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">divide</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token keyword">return</span> value <span class="token operator">/</span> <span class="token number">2</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>组件化

创建组件构造器 Vue<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
注册组件 Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">(</span>全局<span class="token punctuation">)</span>
使用组件

组件的语法糖注册
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'mycpn'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  template<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">&lt;h1&gt;1234&lt;/h1&gt;</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

组件模版抽离
<span class="token operator">&lt;</span>script type <span class="token operator">=</span> <span class="token string">&quot;text/x-template&quot;</span> id<span class="token operator">=</span><span class="token string">'cpn'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span><span class="token comment">//通过id进行绑定</span>
<span class="token operator">&lt;</span>template id<span class="token operator">=</span><span class="token string">'cpn'</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>template<span class="token operator">&gt;</span>
Vue<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">'mycpn'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>template<span class="token operator">:</span><span class="token string">'#cpn'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

父子组件通信  数据传递
通过props向子组件传递数据
通过事件向父组件发送数据   $emit

props<span class="token operator">:</span><span class="token punctuation">{</span><span class="token punctuation">}</span>	 用对象来做类型限制和提供默认值<span class="token keyword">default</span><span class="token function">和必传值required</span><span class="token punctuation">(</span>boolean<span class="token punctuation">)</span>
友情提示：其实不是Vue不支持驼峰。而是在<span class="token constant">HTML</span>属性不支持大写，即cInfo会自动解析成cinfo。这些边边角角的不算知识点，只能说是坑？？？

如果props里面写的是驼峰。那么在组件使用时数据绑定应该使用<span class="token operator">-</span>来连接


父子组件的访问方式 $children<span class="token operator">/</span><span class="token function">$refs</span><span class="token punctuation">(</span>引用<span class="token punctuation">)</span>

子访问父$parent
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>slot插槽


插槽基本使用
默认值
多个值也可以一起替换


具名插槽
<span class="token operator">&lt;</span>slot name<span class="token operator">=</span><span class="token string">&quot;left&quot;</span><span class="token operator">&gt;</span><span class="token operator">&lt;</span>button<span class="token operator">&gt;</span>Left<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>slot<span class="token operator">&gt;</span>


编译的作用域
父级模板里的所有内容都是在父级作用域中编译的；子模板里的所有内容都是在子作用域中编译的。？

作用域插槽	v<span class="token operator">-</span>slot<span class="token operator">=</span><span class="token string">'scope'</span>			语法糖
父组件替换插槽的标签，但是内容由子组件来提供。

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h6 id="vuex-状态管理模式"><a href="#vuex-状态管理模式" class="header-anchor">#</a> Vuex 状态管理模式</h6> <ul><li>使得组件中的状态可以共享。 多个组件共享状态（简单理解就是变量变量</li> <li>响应式 属性</li></ul> <h6 id="第-147-题-v-if、v-show、v-html-的原理是什么-它是如何封装的-307"><a href="#第-147-题-v-if、v-show、v-html-的原理是什么-它是如何封装的-307" class="header-anchor">#</a> 第 147 题：v-if、v-show、v-html 的原理是什么，它是如何封装的？ #307</h6> <ul><li>v-if会调用addIfCondition方法，生成vnode的时候会忽略对应节点，render的时候就不会渲染；</li> <li>v-show会生成vnode，render的时候也会渲染成真实节点，只是在render过程中会在节点的属性中修改show属性值，也就是常说的display；</li> <li>v-html会先移除节点下的所有节点，调用html方法，通过addProp添加innerHTML属性，归根结底还是设置innerHTML为v-html的值</li></ul> <p>组件名 不能用驼峰 得用<code>-</code>否则会找不到组件</p> <p>vue.js 页面DOM元素加载完以后，执行方法</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>在接口请求成功的回调里使用

<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$nextTick</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  <span class="token comment">// </span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Honjaychang/Honjaychang.github.io/issues/new#/edit/master/FE/Vue.md" target="_blank" rel="noopener noreferrer">纠错/留言/交流</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/13/2021, 5:27:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/FE/scene.html" class="prev">
        场景题
      </a></span> <span class="next"><a href="/FE/React.html">
        React
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8db34c63.js" defer></script><script src="/assets/js/2.983698d7.js" defer></script><script src="/assets/js/20.38e0a8e2.js" defer></script>
  </body>
</html>
