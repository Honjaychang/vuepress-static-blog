<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>计网 | HonjayChang</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link rel="icon" href="/photo.ico">
    <meta name="description" content="厚积而薄发">
    
    <link rel="preload" href="/assets/css/0.styles.101e93c3.css" as="style"><link rel="preload" href="/assets/js/app.8db34c63.js" as="script"><link rel="preload" href="/assets/js/2.983698d7.js" as="script"><link rel="preload" href="/assets/js/39.e72d78d1.js" as="script"><link rel="prefetch" href="/assets/js/10.53f50f72.js"><link rel="prefetch" href="/assets/js/11.14ae67e3.js"><link rel="prefetch" href="/assets/js/12.8bd1e098.js"><link rel="prefetch" href="/assets/js/13.81e2b1b5.js"><link rel="prefetch" href="/assets/js/14.89bf0b9b.js"><link rel="prefetch" href="/assets/js/15.c965b4da.js"><link rel="prefetch" href="/assets/js/16.6253e22c.js"><link rel="prefetch" href="/assets/js/17.f2d1d7ed.js"><link rel="prefetch" href="/assets/js/18.d194ed84.js"><link rel="prefetch" href="/assets/js/19.9dfc0424.js"><link rel="prefetch" href="/assets/js/20.38e0a8e2.js"><link rel="prefetch" href="/assets/js/21.29b30efb.js"><link rel="prefetch" href="/assets/js/22.70e339a1.js"><link rel="prefetch" href="/assets/js/23.481c7338.js"><link rel="prefetch" href="/assets/js/24.47652bca.js"><link rel="prefetch" href="/assets/js/25.66e7da71.js"><link rel="prefetch" href="/assets/js/26.162bb288.js"><link rel="prefetch" href="/assets/js/27.5a4ab791.js"><link rel="prefetch" href="/assets/js/28.e7411d81.js"><link rel="prefetch" href="/assets/js/29.9144167b.js"><link rel="prefetch" href="/assets/js/3.363d4551.js"><link rel="prefetch" href="/assets/js/30.1265b18a.js"><link rel="prefetch" href="/assets/js/31.c8454f4e.js"><link rel="prefetch" href="/assets/js/32.5e3e87b4.js"><link rel="prefetch" href="/assets/js/33.8f3137a0.js"><link rel="prefetch" href="/assets/js/34.3b003f35.js"><link rel="prefetch" href="/assets/js/35.840eb4e9.js"><link rel="prefetch" href="/assets/js/36.df15f5f0.js"><link rel="prefetch" href="/assets/js/37.aaea4be9.js"><link rel="prefetch" href="/assets/js/38.352ad4cb.js"><link rel="prefetch" href="/assets/js/4.d38cbe0d.js"><link rel="prefetch" href="/assets/js/40.dff4d77e.js"><link rel="prefetch" href="/assets/js/5.b570c556.js"><link rel="prefetch" href="/assets/js/6.c9f44ce5.js"><link rel="prefetch" href="/assets/js/7.5da1919b.js"><link rel="prefetch" href="/assets/js/8.c43efb22.js"><link rel="prefetch" href="/assets/js/9.d8640715.js">
    <link rel="stylesheet" href="/assets/css/0.styles.101e93c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/photo.jpg" alt="HonjayChang" class="logo"> <span class="site-name can-hide">HonjayChang</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/FE/" class="nav-link">
  FE
</a></div><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">
  INTE
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  DEV
</a></div><div class="nav-item"><a href="/DS/" class="nav-link">
  DS
</a></div><div class="nav-item"><a href="https://honjaychang.github.io/VuePress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Link
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/FE/" class="nav-link">
  FE
</a></div><div class="nav-item"><a href="/interview/" class="nav-link router-link-active">
  INTE
</a></div><div class="nav-item"><a href="/dev/" class="nav-link">
  DEV
</a></div><div class="nav-item"><a href="/DS/" class="nav-link">
  DS
</a></div><div class="nav-item"><a href="https://honjaychang.github.io/VuePress/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Link
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/interview/" aria-current="page" class="sidebar-link">HTML</a></li><li><a href="/interview/CSS.html" class="sidebar-link">CSS</a></li><li><a href="/interview/JS.html" class="sidebar-link">JavaScript</a></li><li><a href="/interview/Web-API.html" class="sidebar-link">Web-API</a></li><li><a href="/interview/HTTP-Browser.html" class="sidebar-link">HTTP-Browser</a></li><li><a href="/interview/network.html" aria-current="page" class="active sidebar-link">计网</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/interview/network.html#tcp和udp的区别" class="sidebar-link">TCP和UDP的区别</a></li><li class="sidebar-sub-header"><a href="/interview/network.html#三次握手四次挥手" class="sidebar-link">三次握手四次挥手</a></li><li class="sidebar-sub-header"><a href="/interview/network.html#osi七层模型" class="sidebar-link">OSI七层模型</a></li><li class="sidebar-sub-header"><a href="/interview/network.html#https-http" class="sidebar-link">HTTPS &amp; HTTP</a></li><li class="sidebar-sub-header"><a href="/interview/network.html#浏览器输入网址到页面渲染全过程" class="sidebar-link">浏览器输入网址到页面渲染全过程</a></li></ul></li><li><a href="/interview/hand.html" class="sidebar-link">各种手写</a></li><li><a href="/interview/quize.html" class="sidebar-link">作用域和自由变量</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="计网"><a href="#计网" class="header-anchor">#</a> 计网</h1> <h2 id="tcp和udp的区别"><a href="#tcp和udp的区别" class="header-anchor">#</a> TCP和UDP的区别</h2> <h5 id="连接方面"><a href="#连接方面" class="header-anchor">#</a> 连接方面</h5> <ul><li>TCP面向连接，UDP不需要连接</li> <li>TCP需要三次握手四次挥手请求连接  <a href="https://segmentfault.com/a/1190000018592072" target="_blank" rel="noopener noreferrer">TCP是如何实现可靠连接的？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> <ul><li>超时重传</li></ul></li></ul> <h5 id="可靠性"><a href="#可靠性" class="header-anchor">#</a> 可靠性</h5> <ul><li>TCP是可靠传输；一旦传输过程中丢包的话会进行重传</li> <li>UDP是不可靠传输，但会最大努力交付</li></ul> <h5 id="工作效率"><a href="#工作效率" class="header-anchor">#</a> 工作效率</h5> <ul><li>UDP实时性高，比TCP工作效率高</li> <li>因为不需要建立连接，更不需要复杂的握手挥手以及复杂的算法，也没有4重传机制</li></ul> <h5 id="是否支持多对多"><a href="#是否支持多对多" class="header-anchor">#</a> 是否支持多对多</h5> <ul><li>TCP是点对点的</li> <li>UDP支持一对一，一对多，多对多</li></ul> <h5 id="首部大小"><a href="#首部大小" class="header-anchor">#</a> 首部大小</h5> <ul><li>TCP首部占20字节</li> <li>UDP首部占8字节，首部开销小。同样的报文内容，UDP会比TCP更高效。</li></ul> <h2 id="三次握手四次挥手"><a href="#三次握手四次挥手" class="header-anchor">#</a> 三次握手四次挥手</h2> <ul><li>图源：博客 <a href="https://blog.csdn.net/qzcsu/article/details/72861891" target="_blank" rel="noopener noreferrer">两张动图-彻底明白TCP的三次握手与四次挥手<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><code>SYN(Synchronize) 同步</code> <code>ACK 确认</code></li></ul> <h5 id="三次握手"><a href="#三次握手" class="header-anchor">#</a> 三次握手</h5> <img src="https://cdn.jsdelivr.net/gh/honjaychang/icopicture/blog/image-20210312214207519.png" alt="image-20210312214207519" style="zoom:50%;"> <p><strong>实质</strong>：客户端连接服务器指定端口 建立TCP连接，并同步双方的序列号和确认号，交换<code>TCP窗口大小</code>信息</p> <ul><li>服务端调用<code>listen</code>系统命令，进入监听状态，等待客户端的连接。</li> <li>客户端向服务端发送<code>连接请求报文</code>，其中TCP标志位里<code>SYN=1，ACK=0</code>，选择一个初始的序号<code>x</code>。</li> <li>服务端收到请求报文，向 客户端 发送 <code>连接确认报文</code> ，<code>SYN=1，ACK=1</code>，确认号为 <code>x+1</code>，同时也选择一个初始的序号<code>y</code>。</li> <li>客户端 收到 服务端的连接确认报文后，还要向 服务端 <code>发出确认</code>，确认号为 <code>y+1</code>，序号为 <code>x+1</code>。</li> <li>服务端 收到 客户端 的确认后，<code>连接建立</code>。</li></ul> <h5 id="四次挥手"><a href="#四次挥手" class="header-anchor">#</a> 四次挥手</h5> <img src="https://cdn.jsdelivr.net/gh/honjaychang/icopicture/blog/image-20210312214227886.png" alt="image-20210312214227886" style="zoom:50%;"> <ul><li>当主动方关闭连接时，会发送 <code>FIN</code> 报文，此时主动方的连接状态由 <code>ESTABLISHED</code> 变为 <code>FIN_WAIT1</code>。当被动方收到 <code>FIN</code> 报文后，内核自动回复 <code>ACK</code> 报文，连接状态由 <code>ESTABLISHED</code> 变为 <code>CLOSE_WAIT</code>，顾名思义，它在等待进程调用 <code>close</code> 函数关闭连接。当主动方接收到这个 <code>ACK</code> 报文后，连接状态由 <code>FIN_WAIT1</code> 变为 <code>FIN_WAIT2</code>，主动方的发送通道就关闭了。</li> <li>再来看被动方的发送通道是如何关闭的。当被动方进入 <code>CLOSE_WAIT</code> 状态时，进程的 <code>read</code> 函数会返回 0，这样开发人员就会有针对性地调用 <code>close 函数</code>，进而触发内核发送 <code>FIN</code> 报文，此时被动方连接的状态变为 <code>LAST_ACK</code>。当主动方收到这个 <code>FIN</code> 报文时，内核会自动回复 <code>ACK</code>，同时连接的状态由 <code>FIN_WAIT2</code> 变为 <code>TIME_WAIT</code>，<code>Linux</code> 系统下大约 <code>1 分钟</code>后 TIME_WAIT 状态的连接才会彻底关闭。而被动方收到 <code>ACK</code> 报文后，连接就会关闭。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>那为什么需要三次握手，四次挥手呢？
<span class="token number">3</span>次握手的作用就是双方都能明确自己和对方的收、发能力是正常的，三次连接是保证可靠性的最小握手次数。
<span class="token number">4</span>次挥手呐，<span class="token constant">TCP</span>的全双工通信断开连接，需要双方的都确认断开。
	当客户端确认自己没有数据要传给服务器时，并不能保证服务器也没有数据要发送了
  前两次挥手是客户端和服务器对连接断开的确认
  第三次服务器会将剩下的数据发给客户端
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>Ref</code></p> <ul><li><a href="https://yuanrengu.com/2020/77eef79f.html" target="_blank" rel="noopener noreferrer">面试官，不要再问我三次握手和四次挥手<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://mp.weixin.qq.com/s/tH8RFmjrveOmgLvk9hmrkw" target="_blank" rel="noopener noreferrer">硬不硬你说了算！近 40 张图解被问千百遍的 TCP 三次握手和四次挥手面试题<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/108822858" target="_blank" rel="noopener noreferrer">一文搞定 UDP 和 TCP 高频面试题！<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="osi七层模型"><a href="#osi七层模型" class="header-anchor">#</a> OSI七层模型</h2> <ul><li>TCP 属于传输层</li> <li>发送数据是封装过程 接收则是解封装</li></ul> <img src="HTTPs://cdn.jsdelivr.net/gh/honjaychang/icopicture/blog/image-20210312132823375.png" alt="image-20210312132823375" style="zoom:50%;"> <ul><li>物理层：利用物理传输介质为数据链路层提供物理连接，实现比特流的透明传输</li> <li>数据链路层：
<ul><li>交换机 帧（帧是放置数据的、逻辑的、结构化的包</li> <li>将来自物理层的原始数据进行MAC地址的封装与解封装</li> <li>点到点传输</li></ul></li> <li>网络层：
<ul><li>ARP：地址解析协议</li> <li>路由器 数据包分组</li> <li>将数据链路层的数据进行IP地址的封装与解封装</li> <li>IP地址寻址问题  路由算法：确定从源结点沿着网络到目的结点的路由选择</li> <li>数据链路层是解决同一网络内节点之间的通信，而网络层主要解决不同子网间的通信</li></ul></li> <li>传输层：
<ul><li>定义传输数据的协议和端口 TCP UDP</li> <li>将从下层接收的数据进行分段和传输，到达目的地址后再进行重组</li> <li>向用户提供可靠的、透明的、端到端的数据传输，以及差错控制和流量控制机制</li> <li><a href="https://blog.csdn.net/weixin_43914604/article/details/105531547?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-0&amp;spm=1001.2101.3001.4242" target="_blank" rel="noopener noreferrer">TCP流量控制<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li> <li>会话层：
<ul><li>会话层建立、管理和终止应用程序进程之间的会话和数据交换</li></ul></li> <li>表示层
<ul><li>主要是进行对接收的数据进行解释、加密与解密、压缩与解压缩等</li></ul></li> <li>应用层
<ul><li>终端应用</li></ul></li></ul> <h2 id="https-http"><a href="#https-http" class="header-anchor">#</a> HTTPS &amp; HTTP</h2> <p>HTTP：无状态<code>(stateless)</code>协议。HTTP 协议自身不对请求和响应之间的通信状态进行保存。即协议对于发送过的请求或响应都不做持久化处理</p> <h4 id="区别"><a href="#区别" class="header-anchor">#</a> 区别</h4> <ul><li><code>HTTP</code>：无状态无连接，而且是明文传输，不安全 80</li> <li><code>HTTPS</code>：传输内容加密，身份验证，保证数据完整性  <code>HTTP + SSL/TLS</code> 443</li></ul> <h5 id="http-的不足"><a href="#http-的不足" class="header-anchor">#</a> HTTP 的不足</h5> <ul><li>通信使用明文，内容可能会被窃听  -&gt;  通信加密  <s>数据加密</s></li> <li>不验证通信方的身份，因此有可能遭遇伪装  -&gt; <code>SSL HTTPS</code> 数字证书</li> <li>无法证明报文的完整性，所以有可能已遭篡改 -&gt; 中间人攻击 MD5 数字签名</li></ul> <h5 id="完整性检测-数字签名"><a href="#完整性检测-数字签名" class="header-anchor">#</a> 完整性检测 - 数字签名</h5> <ul><li>将一段文本通过<code>hash</code>函数生成消息摘要，再通过客户端的私钥进行加密生成数字签名</li> <li>服务器收到数字签名后先用公钥进行解密 得到消息摘要
<ul><li>然后对收到的原文也进行<code>hash</code>生成消息摘要</li> <li>比较前后两次消息摘要  如果相同  则证明完整没有被篡改</li></ul></li></ul> <h5 id="数字证书"><a href="#数字证书" class="header-anchor">#</a> 数字证书</h5> <ul><li>解决通信身份可能被伪装问题</li> <li>服务器运营人员向第三方证书机构提交CA公钥、组织信息、域名等信息进行申请认证</li> <li>数字证书机构通过线上线下等手段去验证所提供的信息是否合法。合法的话会向申请者颁发证书（包含CA公钥、证书机构和所有者组织信息、证书有效时间、序列号等信息，还包含一个签名（使用散列函数计算公开明文的消息摘要并通过CA的私钥进行加密 =&gt; 签名</li> <li>客户端向目标服务器发起请求时会返回相应的证书文件</li> <li>客户端读取证书中信息，进行相同的散列函数计算得到消息摘要。通过CA中的公钥解密签名数据，对比证书的消息摘要是否一致来判断是否合法</li></ul> <h4 id="https实现原理"><a href="#https实现原理" class="header-anchor">#</a> HTTPS实现原理</h4> <p><strong>HTTP +</strong> 加密 <strong>+</strong> 认证 <strong>+</strong> 完整性保护  = <strong>HTTPS</strong></p> <ul><li><p>过程</p> <ul><li>客户端发送消息给服务器（包含可用的加密算法和压缩算法</li> <li>服务器返回消息给客户端（包含选用的加密和压缩算法以及数字证书认证机构CA签发的证书（包含公钥 + 证书所应用的域名范围</li> <li>客户端去验证公钥证书 是否合法</li> <li>客户端使用伪随机数生成传输信息所用的对称密钥，然后通过证书的公钥去传输对称密钥</li> <li>服务端接收到信息后，用自己的私钥去解密来获得对称密钥</li> <li>服务端使用对称密钥与客户端进行通信（此时双方都已经拥有了对称密钥</li></ul></li> <li><p>SSL 公钥加密的算法</p> <ul><li>对称加密的问题：密钥分发的问题 安全性问题</li></ul></li> <li><p>HTTPS采用 共享密钥(对称加密) 和 公开密钥(非对称加密)两者混用的加密机制</p> <ul><li>非对称：交换对称密钥</li> <li>对称：信息交换</li></ul></li></ul> <p><code>Ref</code></p> <ul><li><p><a href="https://juejin.cn/post/6844903830916694030" target="_blank" rel="noopener noreferrer">深入理解HTTPS工作原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://cloud.tencent.com/developer/article/1005197" target="_blank" rel="noopener noreferrer">深入浅出 HTTPS 工作原理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <h4 id="http版本"><a href="#http版本" class="header-anchor">#</a> HTTP版本</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code>使用长连接之后，客户端、服务端怎么知道本次传输结束呢？两部分：<span class="token number">1.</span> 判断传输数据是否达到了Content<span class="token operator">-</span>Length 指示的大小；<span class="token number">2.</span> 动态生成的文件没有 Content<span class="token operator">-</span>Length ，它是分块传输（chunked），这时候就要根据 chunked 编码来判断，chunked 编码的数据在最后有一个空 chunked 块，表明本次传输数据结束，
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>HTTP/0.9：只能进行<code>get</code>请求，发送纯文本</li> <li>HTTP/1.0：添加了<code>POST、HEAD、OPTION、PUT、DELETE</code>等</li> <li>HTTP/1.1：
<ul><li>默认支持了长连接<code>keep-alive</code>：旨在建立 <strong>1</strong> 次 <strong>TCP</strong> 连接后进行多次请求和响应的交互  <code>Keep-Alive: timeout=5, max=100</code></li> <li>管线化：不用等待响应亦可直接发送下一个请求，就能够做到同时并行发送多个请求</li> <li>虽然是无状态协议，但为了实现期望的保持状态功能，于是引入了 <code>Cookie</code> 技术（通过在请求和响应报文中写入 Cookie 信息来控制客户端的状态</li> <li>增加了<code>host</code> 域，而且节约带宽?</li></ul></li> <li>HTTP/2：
<ul><li>多路复用：让所有的通信都在一个TCP连接上完成，实现了请求的并发</li> <li>头部压缩：利用HPACK算法压缩头部的<code>User-Agent Cookie Accept Server Rabge</code>等字段</li> <li>服务器推送：使得服务器可以预测客户端需要的资源，主动推送到客户端</li></ul></li></ul> <p><code>Ref:</code></p> <ul><li><p><a href="https://g.yuque.com/kougazhang/network/ccyd8g" target="_blank" rel="noopener noreferrer">简介: http/https/http2<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://blog.51cto.com/12118369/1962662" target="_blank" rel="noopener noreferrer">http1.0，http1.1和http2.0的区别<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ul> <p><code>cookie</code> 是存储在浏览器的小段文本，会在浏览器每次向同一服务器再发起请求时被携带并发送到服务 器上。我们可以把状态信息放在<code>cookie</code>里，带给服务器。</p> <p><code>session</code> 是存储在服务器的用户数据。浏览器第一次向服务器发起请求时，服务器会为当前会话创建一个 <code>session</code>，并且把对应的 <code>session-id</code> 写入 <code>cookie</code> 中，用来标识 <code>session</code>。此后，每次用户的请求都会携带 一个包含了 <code>session-id</code> 的 <code>cookie</code>，服务器解析出了 <code>session-id</code>，便能定位到用户的用户信息。</p> <h2 id="浏览器输入网址到页面渲染全过程"><a href="#浏览器输入网址到页面渲染全过程" class="header-anchor">#</a> 浏览器输入网址到页面渲染全过程</h2> <ul><li>DNS解析：域名解析为IP地址
<ul><li>缓存命中</li></ul></li> <li>浏览器缓存 =&gt; 系统缓存 =&gt; 路由器缓存 =&gt; <code>ISP</code>服务器缓存 =&gt; 根域名服务器缓存 =&gt; 顶级域名服务器缓存 =&gt; 主域名服务器缓存</li> <li>TCP连接：三次握手</li> <li>发送HTTP请求</li> <li>服务器处理请求  并  返回HTTP响应报文</li> <li>浏览器解析渲染页面：<code>HTML、CSS、JS</code>文件</li> <li><code>DOM Tree + CSSOM =&gt; Render Tree =&gt; JS =&gt; Render Tree</code></li> <li>连接结束</li></ul> <p><code>Ref:</code></p> <ul><li><a href="https://segmentfault.com/a/1190000006879700" target="_blank" rel="noopener noreferrer">前端经典面试题: 从输入URL到页面加载发生了什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://blog.fundebug.com/2019/02/28/what-happens-from-url-to-webpage/" target="_blank" rel="noopener noreferrer">经典面试题：从 URL 输入到页面展现到底发生什么？<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Honjaychang/Honjaychang.github.io/issues/new#/edit/master/interview/network.md" target="_blank" rel="noopener noreferrer">纠错/留言/交流</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">5/12/2021, 10:48:37 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/interview/HTTP-Browser.html" class="prev">
        HTTP-Browser
      </a></span> <span class="next"><a href="/interview/hand.html">
        各种手写
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8db34c63.js" defer></script><script src="/assets/js/2.983698d7.js" defer></script><script src="/assets/js/39.e72d78d1.js" defer></script>
  </body>
</html>
